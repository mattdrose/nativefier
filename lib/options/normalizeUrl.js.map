{"version":3,"sources":["options/normalizeUrl.js"],"names":["appendProtocol","testUrl","parsed","parse","protocol","normalizeUrl","urlWithProtocol","validatorOptions","require_protocol","require_tld","allow_trailing_dot","isURL","Error"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,SAASA,cAAT,CAAwBC,OAAxB,EAAiC;AAC/B,MAAMC,SAAS,cAAIC,KAAJ,CAAUF,OAAV,CAAf;AACA,MAAI,CAACC,OAAOE,QAAZ,EAAsB;AACpB,WAAQ,UAASH,OAAQ,EAAzB;AACD;AACD,SAAOA,OAAP;AACD;;AAED,SAASI,YAAT,CAAsBJ,OAAtB,EAA+B;AAC7B,MAAMK,kBAAkBN,eAAeC,OAAf,CAAxB;;AAEA,MAAMM,mBAAmB;AACvBC,sBAAkB,IADK;AAEvBC,iBAAa,KAFU;AAGvBC,wBAAoB,IAHG,CAGG;AAHH,GAAzB;AAKA,MAAI,CAAC,oBAAUC,KAAV,CAAgBL,eAAhB,EAAiCC,gBAAjC,CAAL,EAAyD;AACvD,UAAM,IAAIK,KAAJ,CAAW,cAAaN,eAAgB,eAAxC,CAAN;AACD;AACD,SAAOA,eAAP;AACD;;kBAEcD,Y","file":"normalizeUrl.js","sourcesContent":["import url from 'url';\nimport validator from 'validator';\n\nfunction appendProtocol(testUrl) {\n  const parsed = url.parse(testUrl);\n  if (!parsed.protocol) {\n    return `http://${testUrl}`;\n  }\n  return testUrl;\n}\n\nfunction normalizeUrl(testUrl) {\n  const urlWithProtocol = appendProtocol(testUrl);\n\n  const validatorOptions = {\n    require_protocol: true,\n    require_tld: false,\n    allow_trailing_dot: true, // mDNS addresses, https://github.com/jiahaog/nativefier/issues/308\n  };\n  if (!validator.isURL(urlWithProtocol, validatorOptions)) {\n    throw new Error(`Your Url: \"${urlWithProtocol}\" is invalid!`);\n  }\n  return urlWithProtocol;\n}\n\nexport default normalizeUrl;\n"]}